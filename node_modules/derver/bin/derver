#!/usr/bin/env node
var g=Object.create;var m=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var P=e=>m(e,"__esModule",{value:!0});var j=(e,s,o)=>{if(s&&typeof s=="object"||typeof s=="function")for(let t of b(s))!y.call(e,t)&&t!=="default"&&m(e,t,{get:()=>s[t],enumerable:!(o=v(s,t))||o.enumerable});return e},E=e=>j(P(m(e!=null?g($(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var w=E(require("../dist/derver.cjs.js"));var U="derver",A="Derver is a tiny development web server with livereload and files watching.",D="[params] [serve dir]",N=[{name:"host",help:"Host where to bind server"},{name:"port",help:"Port where to bind server"},{name:"index",help:"Index file for server"},{name:"watch",multiple:!0,help:"Directory for watching. May be used multiple times."},{name:"no-watch",help:"Prevent any watching."},{name:"compress",help:"Return files compressed by gzip or brotli, if client supports it."},{name:"cache",help:"Add Cache-control header."},{name:"spa",help:"Enaples SPA mode when all page requests will be responced by index page."},{name:"production",help:"Run server in production mode: enables --compress,--cache and--no-watch parameters"},{name:"help",help:"Show usage information"}],R=["","dist/public","--host=0.0.0.0 --port=5000","--watch=dist/public --watch=src","--production"],p={name:U,description:A,usage:D,params:N,examples:R};function d(){let e={dir:".",params:{}},s=process.argv.slice(2);if(s.length==0)return e;s[s.length-1].startsWith("-")||(e.dir=s.pop());for(let o of s){let t=o.split("="),n=t[0].replace(/^\-{1,2}/,""),c=t[1]||!0,l=n in e.params,h=p.params.find(x=>x.name==n);if(!h)return!1;if(h.multiple)l||(e.params[n]=[]),e.params[n].push(c);else{if(l)return!1;e.params[n]=c}}return e}function u(e=0){process.exit(e)}function f(){return`${p.description}

Usage:
    ${p.name} ${p.usage}

Parameters:
${p.params.map(e=>`  ${e.name.padEnd(15)} ${e.help}`).join(`
`)}

Examples:
${p.examples.map(e=>`  ${p.name} ${e}`).join(`
`)}
`}var a=d();(!a||a.params.help)&&(console.log(f()),u());var r={};a.dir&&(r.dir=a.dir);a.params.index&&(r.index=a.params.index);a.params.watch&&(r.index=a.params.watch);a.params["no-watch"]&&(r.watch=!1);a.params.spa&&(r.spa=!0);a.params.compress&&(r.compress=!0);a.params.cache&&(r.cache=a.params.cache===!0?!0:Number(a.params.cache));a.params.production&&(r.compress=!0,r.cache=!0,r.watch=!1,r.host="0.0.0.0");a.params.host&&(r.host=a.params.host);a.params.port&&(r.port=Number(a.params.port));(0,w.derver)(r);
